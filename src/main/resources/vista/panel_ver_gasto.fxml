<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.collections.FXCollections?>
<?import java.lang.String?>

<VBox spacing="15" styleClass="content-area" 
      xmlns="http://javafx.com/javafx" 
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.tds.gestiongastos.vista.VerGastosViewController">

    <Label text="Mis Gastos" style="-fx-font-size: 20px; -fx-font-weight: bold;" />

    <!-- Filtros -->
    <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 10;">
        <Label text="Filtros" style="-fx-font-size: 14px; -fx-font-weight: bold;" />
        
        <HBox spacing="15" alignment="CENTER_LEFT">
            <VBox spacing="5">
                <Label text="Categoría:" />
                <ComboBox fx:id="comboCategoria" prefWidth="150" promptText="Todas">
                    <items>
                        <FXCollections fx:factory="observableArrayList">
                            <String fx:value="Todas" />
                        </FXCollections>
                    </items>
                </ComboBox>
            </VBox>

            <VBox spacing="5">
                <Label text="Desde:" />
                <DatePicker fx:id="fechaDesde" prefWidth="140" />
            </VBox>

            <VBox spacing="5">
                <Label text="Hasta:" />
                <DatePicker fx:id="fechaHasta" prefWidth="140" />
            </VBox>

            <VBox spacing="5">
                <Label text="Buscar:" />
                <TextField fx:id="campoBusqueda" promptText="Concepto..." prefWidth="150" />
            </VBox>

            <VBox spacing="5">
                <Label text=" " />
                <HBox spacing="10">
                    <Button text="Aplicar" onAction="#handleAplicarFiltros" styleClass="boton-login" />
                    <Button text="Limpiar" onAction="#handleLimpiarFiltros" styleClass="boton-secundario" />
                </HBox>
            </VBox>
        </HBox>
    </VBox>

    <!-- Estadísticas -->
    <HBox spacing="20">
        <VBox spacing="5" style="-fx-background-color: #e0f2fe; -fx-padding: 10; -fx-background-radius: 8;">
            <Label text="Total Gastos:" style="-fx-font-size: 12px; -fx-text-fill: #0369a1;" />
            <Label fx:id="labelTotalGastos" text="0" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #0369a1;" />
        </VBox>
        
        <VBox spacing="5" style="-fx-background-color: #fef3c7; -fx-padding: 10; -fx-background-radius: 8;">
            <Label text="Cantidad Total:" style="-fx-font-size: 12px; -fx-text-fill: #92400e;" />
            <Label fx:id="labelCantidadTotal" text="0.00 €" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #92400e;" />
        </VBox>
    </HBox>

    <!-- Tabla -->
    <TableView fx:id="tablaGastos" VBox.vgrow="ALWAYS">
        <columns>
            <TableColumn fx:id="columnaFecha" text="Fecha" prefWidth="120" />
            <TableColumn fx:id="columnaCantidad" text="Cantidad (€)" prefWidth="120" />
            <TableColumn fx:id="columnaCategoria" text="Categoría" prefWidth="150" />
            <TableColumn fx:id="columnaConcepto" text="Concepto" prefWidth="250" />
            <TableColumn fx:id="columnaCuenta" text="Cuenta" prefWidth="150" />
        </columns>
        <placeholder>
            <Label text="No hay gastos registrados" style="-fx-font-size: 14px; -fx-text-fill: #64748b;" />
        </placeholder>
    </TableView>

    <!-- Botones de acción -->
    <HBox spacing="10" alignment="CENTER_RIGHT">
        <Button text=" Nuevo Gasto" onAction="#handleNuevoGasto" styleClass="boton-login" />
        <Button text=" Editar" onAction="#handleEditar" styleClass="boton-login" />
        <Button text=" Borrar" onAction="#handleBorrar" style="-fx-background-color: #dc2626; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 12; -fx-padding: 14 28; -fx-cursor: hand;" />
    </HBox>

</VBox>